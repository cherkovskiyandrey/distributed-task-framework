spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/distributed-task
    username: distributed-task
    password: distributed-task
    hikari:
      maximum-pool-size: 20
      minimum-idle: 10
      data-source-properties:
        rewriteBatchedStatements: true
        useConfigs: maxPerformance
      validation-timeout: 10000
      keepalive-time: 60000
      connection-timeout: 10000
  application:
    name: test-app

distributed-task:
  enabled: true
  common:
    app-name: local-test-app
    completion:
      handler-initial-delay: PT1S
      handler-fixed-delay: PT1S
      default-task-timeout: PT1M
      default-workflow-timeout: PT1M
    registry:
      update-initial-delay-ms: 5000
      update-fixed-delay-ms: 5000
      max-inactivity-interval-ms: 16000
      cache-expiration-ms: 5000
    planner:
      watchdog-initial-delay-ms: 5000
      watchdog-fixed-delay-ms: 5000
      max-parallel-tasks-in-cluster-default: 100
      batch-size: 100
      polling-delay:
        0: 10
    worker-manager:
      max-parallel-tasks-in-node: 100
      manage-delay:
        0: 10

  task-properties-group:
    default-properties:
      execution-guarantees: AT_LEAST_ONCE
      dlt-enabled: true
      retry:
        backoff:
          initial-delay: PT10S
          delay-period: PT5S
          max-retries: 1000
          max-delay: PT1H
        fixed:
          delay: PT1S
          max-interval: PT5S
          max-number: 5
        retry-mode: FIXED
      max-parallel-in-cluster: 100
      timeout: PT10S

  saga:
    enabled: true
    common:
      cache-expiration: PT30S
    context:
      completed-timeout: PT30S
      expiration-timeout: PT30M
    # Whole saga configuration by name
    saga-properties-group:
      default-saga-properties:
        available-after-completion-timeout: PT1M
        expiration-timeout: PT10M
      saga-properties-group:
        # Saga name
        test:
          expiration-timeout: PT3M
    # Configuration for saga methods
    saga-method-properties-group:
      # Default configuration for all methods, override default configuration for tasks from task-properties-group#default-properties
      default-saga-method-properties:
        execution-guarantees: AT_LEAST_ONCE
        retry:
          fixed:
            delay: PT1S
            max-interval: PT5S
            max-number: 5
          retry-mode: FIXED
        max-parallel-in-cluster: 100
        timeout: PT10M
      # Customisation of configuration for dedicated saga method
      saga-method-properties:
        # Saga method name
        createLocal:
          retry:
            fixed:
              delay: PT1S
              max-interval: PT5S
              max-number: 5
            retry-mode: FIXED
          max-parallel-in-cluster: 100
          timeout: PT10M
        deleteLocal:
          retry:
            fixed:
              delay: PT1S
              max-interval: PT5S
              max-number: 5
            retry-mode: FIXED
          max-parallel-in-cluster: 100
          timeout: PT10M
        createOnRemoteServiceOne:
          retry:
            fixed:
              delay: PT1S
              max-interval: PT5S
              max-number: 5
            retry-mode: FIXED
          max-parallel-in-cluster: 100
          timeout: PT10M
        createOnRemoteServiceOne_v2:
          retry:
            fixed:
              delay: PT1S
              max-interval: PT5S
              max-number: 5
            retry-mode: FIXED
          max-parallel-in-cluster: 100
          timeout: PT10M